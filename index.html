<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <link rel="stylesheet" href="./css/app.css">
    <link rel="stylesheet" href="./node_modules/font-awesome/css/font-awesome.min.css">
    <script>window.$ = window.jQuery = require('jquery');</script>
  </head>
  <body>
    <div class="left-nav">
      <ul class="nav-list">
        <li id="home"><i class="fa fa-home"></i> Home</li>
        <li id="users"><i class="fa fa-user"></i> Users</li>
      </ul>
    </div>
    <div class="main">

    </div>
    <div class="photos">
      
    </div>
  </body>
  <script>
    'use strict';
    const Photos = require('./lib/photos');
    const app = require('./lib/app');
    const DB = require('./lib/db');
    const request = require('request');

    app.on('rendered', rendered => $('.main').html(rendered));

    $(function() {
      const specs = new DB('specs');
      if (specs.query().length === 0) {
        request('http://172.17.0.114/intranet/net/inventory/electron_pec.aspx', (error, response, body) => {
          specs.save(JSON.parse(body));

          let filtered = specs.query(item => {
            return item.Name.indexOf('Mill') > -1;
          });

          let filtered2 = specs.query({ProductId: 499});
          console.log(filtered2[0]);
        });
      }

      app.emit('view-selected', 'home');

      $('.nav-list li').on('click', function(ev) {
        ev.preventDefault();
        let id = $(this).attr('id');
        app.emit('view-selected', id);
      });
    });
  </script>
</html>
